# OLX Parser

Парсер для извлечения данных о недвижимости с сайта OLX.kz

## Возможности

- Извлечение подробной информации о квартирах и домах с OLX
- Безопасный парсинг с соблюдением лимитов
- Автоматическое сохранение результатов
- Логирование всех операций
- Отслеживание статистики парсинга

## Установка

```bash
cd olx
npm install
```

## Запуск

1. Запустите сервер разработки:
```bash
npm run dev
```

2. В другом терминале запустите парсер:
```bash
node scripts/safe-parser.js
```

## Настройка URL

Отредактируйте файл `urls.txt`, добавив реальные URL объявлений OLX:

```
https://olx.kz/d/nedvizhimost/prodazha-kvartir/almaty/1-komnatnaya-kvartira-44-m-4-5-etazh-IDxxxx.html
https://olx.kz/d/nedvizhimost/prodazha-kvartir/almaty/2-komnatnaya-kvartira-60-m-7-12-etazh-IDxxxx.html
```

## API

### POST /api/parse-olx

Парсинг одного объявления OLX.

**Запрос:**
```json
{
  "url": "https://olx.kz/d/nedvizhimost/..."
}
```

**Ответ:**
```json
{
  "data": {
    "title": "Название объявления",
    "price": "Цена",
    "city": "Город",
    "district": "Район",
    "area": "Площадь",
    "rooms": "Количество комнат",
    "description": "Описание",
    "images": ["url1", "url2"],
    "contact": {
      "name": "Имя",
      "type": "Тип"
    }
  }
}
```

## Лимиты безопасности

- Максимум 150 запросов за сессию
- Задержка 20-45 секунд между запросами
- Остановка при обнаружении блокировки
- Автосохранение каждые 10 запросов

## Структура данных

Парсер извлекает следующие данные:

- **Основная информация**: название, цена, местоположение
- **Характеристики**: площадь, количество комнат, этаж
- **Дополнительно**: описание, фотографии, контакты
- **Метаданные**: ID объявления, дата размещения, просмотры

## Папки

- `parsed-data/` - результаты парсинга в JSON
- `logs/` - логи работы парсера
- `scripts/` - скрипты для автоматизации

## Безопасность

- Соблюдение robots.txt
- Ограничение скорости запросов
- User-Agent браузера
- Обработка ошибок и таймаутов